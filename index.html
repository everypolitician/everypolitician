---
layout: default
---
  <div class="hero hero--homepage hero--blue">
      <div class="container">
        <div id="js-welcome-message">
          <h1>Help build a public list of every politician in the world!</h1>
          <ol class="steps-list">
            <li class="step one">Know where to find a list of politicians for your country?</li>
            <li class="step two">Convert it to the Popolo JSON standard</li>
            <li class="step three">Now anyone can use it to build web tools</li>
          </ol>
          <p class="subtitle"><a href="{{ site.baseurl }}/about">Read more about the project &rarr;</a></p>

        </div>

      </div>
  </div>

  <div class="homepage-map">
      <div class="container">
          <h2 id="map">Our progress</h2>
          <div id="vmap" style="width: 100%; height: 600px"></div>
      </div>
  </div>

  <script type="text/javascript">

    var other_countries = {
      AL: 'http://api.parldata.eu/al/',
      AR: 'https://cargografias.popit.mysociety.org',
      CZ: 'http://api.parldata.eu/cz/',
      GR: 'https://greekparliament.popit.mysociety.org',
      GT: 'https://congresistas-gt.popit.mysociety.org',
      HU: 'http://api.parldata.eu/hu/',
      IN: 'https://chetan.popit.mysociety.org',
      KE: 'https://kenyan-politicians.popit.mysociety.org',
      MY: 'https://sinar-malaysia.popit.mysociety.org',
      MX: 'https://legisladores-mx.popit.mysociety.org',
      NG: 'https://nigerian-politicians.popit.mysociety.org',
      PL: 'http://api.parldata.eu/pl/',
      RS: 'http://api.parldata.eu/rs/',
      SK: 'http://api.parldata.eu/sk/',
      ZA: 'https://za-peoples-assembly.popit.mysociety.org',
      KR: 'https://southkorea.popit.mysociety.org',
      TW: 'https://taiwan.popit.mysociety.org',
      FM: 'https://micronesiagovernment.popit.mysociety.org',
    }



    var draw_map = function() {

      var colors = {}
      $.each(Object.keys(other_countries), function(i, v) { colors[v] = '#afe8e1' });
      $.each(Object.keys(ep_countries),    function(i, v) { colors[v] = '#01BFA9' });
      console.log( colors );

      var regionStyling = { initial: { fill: '#f4f3f0' }};
      
      $('#vmap').vectorMap({
        map: 'world_mill_en',
        normalizeFunction: 'polynomial',
        backgroundColor: 'white',
        regionStyle: regionStyling,
        hoverColor: false,
        series: {
          regions: [{
            values: colors,
            attribute: 'fill'
          }]
        },
        onRegionClick: function(event, code, region) { 
          event.preventDefault();
          if(ep_link = ep_countries[code]) { 
            var url = 'http://data.everypolitician.org' + ep_link + '/term_table.html'
            console.log(url)
            window.location = url;
          } else if (ex_link = other_countries[code]) { 
            window.location = ex_link
          }
          return false;
        },
      });

    };

    var latest_commit = '2616cd3d3c001d0fe11de8c059b7584a8311a12a'
    var gh_raw = 'https://cdn.rawgit.com/everypolitician/everypolitician-data/' + latest_commit + '/countries.json';
    var ep_countries = {}
    var ep_json = $.getJSON(gh_raw, function(data) { 
      $.each(data, function(i, val) { 
        if (val.code == 'XK') { val.code = '_0' }
        ep_countries[val.code] = val.url
      });
      console.log(ep_countries);
      jQuery(document).ready(draw_map());
    });

  </script>

